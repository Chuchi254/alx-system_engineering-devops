#1/usr/bin/env bash
# This script audits the subdomains of a given domain and displays
# information about them

# Function to get subdomain information
get_subdomain_info() {
	local domain=$1
	local subdomain=$2
	local record_info
	record_info=$(dig +short "${subdomain}.${domain}")

	if [[ -z "$recod_info" ]];
	then
		echo "The subdomain ${subdomain} does not exst."
	else
		record_type="A"
		echo "The subdomain ${subdomain} is a ${record_type} record and points to ${record_info}"
	fi
}

domain=$1
subdomain=$2

if [[ -z "$domain" ]];
then
	echo "Domain is required"
	exit 1
fi

if [[ -n "$subdomain" ]]
then
	get_subdomain_info "$domain" "$subdomain"
else
	for sub in www lb-01 web-01 web-02
	do
		get_subdomain_info "$domain" "$sub"
	done
fi
